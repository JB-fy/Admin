依赖：yum install gcc gcc-c++ make libxml2-devel openssl-devel sqlite-devel libcurl-devel libicu-devel openldap-devel libxslt-devel libwebp-devel libjpeg-devel freetype-devel libsodium-devel
    1、创建安装目录
        mkdir -p /server/tool/php-8.1.12
    2、解压php安装
        tar -xvf php-8.1.12.tar.gz

        进入解压目录运行
            //apache模块加载方式设置
            --with-apxs2=/tool/apache/bin/apxs
            //php-fpm方式设置
            --enable-fpm

报错处理
    报错：Cannot find ldap libraries in /usr/lib.
        ln -s /usr/lib64/libldap* /usr/lib/

    报错：Package requirements (oniguruma) were not met
        wget http://mirror.stream.centos.org/9-stream/CRB/x86_64/os/Packages/oniguruma-devel-6.9.6-1.el9.5.x86_64.rpm
        yum localinstall oniguruma-devel-6.9.6-1.el9.5.x86_64.rpm

        //8.0版本弃用
        --with-iconv-dir --enable-inline-optimization --with-xmlrpc --enable-maintainer-zts

        //指定openssl版本--with-openssl=/server/openssl时，需同时设置-disable-shared，否则curl共享库。暂未未验证
        //可增加PKG_CONFIG_PATH=:/server/tool/x1:/server/tool/x2来增加检测依赖的目录。意味着不用--with-foo-dir=DIR等类似参数
        ./configure --prefix=/server/tool/php-8.1.12 --with-config-file-path=/server/tool/php-8.1.12/etc --with-config-file-scan-dir=/server/tool/php-8.1.12/etc/php.d --enable-fpm --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --enable-mysqlnd-compression-support --with-zlib --enable-rpath --enable-bcmath --enable-shmop --enable-mbregex --enable-mbstring --enable-intl --enable-ftp --with-mhash --enable-pcntl --enable-sockets --enable-soap --enable-gd --with-freetype --with-jpeg --with-webp --enable-xml --with-sodium --enable-sysvsem --with-gettext --enable-opcache --with-pear --with-ldap=shared --without-gdbm --enable-exif --with-xsl --with-curl --with-openssl
        //安装
        make && make install
    3、拷贝配置文件
        //拷贝php配置文件
        cp /server/php-8.1.12/php.ini-production /server/tool/php-8.1.12/etc/php.ini
        //php-fpm启动方式设置（多个版本设置多个php-fpm，如php-fpm-8.1.12，php-fpm-8.1.12）
        cp /server/php-8.1.12/sapi/fpm/init.d.php-fpm /server/tool/php-8.1.12/bin/php-fpm-8.1.12
        cp /server/tool/php-8.1.12/etc/php-fpm.conf.default /server/tool/php-8.1.12/etc/php-fpm.conf
        cp /server/tool/php-8.1.12/etc/php-fpm.d/www.conf.default /server/tool/php-8.1.12/etc/php-fpm.d/www.conf
        //安装多版本需要改监听端口，不同版本端口设置要不一样
        vi /server/tool/php-8.1.12/etc/php-fpm.d/www.conf
    4、编辑自启动文件
        vi /etc/systemd/system/php-fpm-8.1.12.service
[Unit]
Description=php-fpm-8.1.12
After=network.target
[Service]
Type=forking
PIDFile=/server/tool/php-8.1.12/var/run/php-fpm.pid
ExecStart=/server/tool/php-8.1.12/bin/php-fpm-8.1.12 start
ExecReload=/server/tool/php-8.1.12/bin/php-fpm-8.1.12 reload
ExecStop=/server/tool/php-8.1.12/bin/php-fpm-8.1.12 stop
PrivateTmp=true
[Install]
WantedBy=multi-user.target
    5、设置自启动
        chmod -R 755 /server/tool/php-8.1.12/bin/php-fpm-8.1.12
        systemctl enable php-fpm-8.1.12
    6、设置环境变量增加以下目录（参考linux常用命令）
        /server/tool/php-8.1.12/bin
    7、扩展安装
        扩展包里面执行以下步骤
        phpize
        ./configure
        make && make install
        在php.ini添加以下内容
        extension=xxxx.so


常用扩展安装
如果php默认扩展没有安装可以重新到php安装包内的ext文件夹内找到对应的扩展安装
安装redis扩展
    tar -xvf redis-5.3.7.tgz
    进入目录编译
    phpize
    ./configure --with-php-config=/server/tool/php-8.1.12/bin/php-config
    make && make install
    在php.ini添加以下内容
    extension=redis.so
安装swoole
    tar -xvf swoole-src-5.0.1.tar.gz
    进入目录编译
    phpize
    //5.0版本弃用：--enable-http2
    ./configure --enable-openssl
    make && make install
    在php.ini添加以下内容
    extension=swoole.so
安装event
    tar -xvf event-3.0.8.tgz
    进入目录编译
    phpize
    ./configure --with-php-config=/server/tool/php-8.1.12/bin/php-config
    make && make install
    在php.ini添加以下内容
    extension=event.so

修改配置参数
vi /server/tool/php-8.1.12/etc/php.ini
修改以下参数
memory_limit            1024M
upload_max_filesize     50M
post_max_size           100M
max_execution_time      不改
disable_functions       phpinfo,eval,proc_open      这里禁用函数（需要时才做）
追加
extension=redis.so
extension=swoole.so
swoole.use_shortname=off
extension=event.so